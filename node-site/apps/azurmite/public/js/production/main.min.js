!function(){function a(){"use strict";A.load.image("sky","/apps/azurmite/public/images/levels/demo/sky.jpg"),A.load.image("diamond","/apps/azurmite/public/images/stock-images/diamond.png"),A.load.image("phaser-tileset","/apps/azurmite/public/images/tilesets/phaser-tileset.png"),A.load.image("phaser-tileset-small","/apps/azurmite/public/images/tilesets/phaser-tileset-small.png"),A.load.image("funky-bullet","/apps/azurmite/public/images/enemies/bullet.png"),A.load.image("player-bullet","/apps/azurmite/public/images/enemies/bullet.png"),A.load.audio("music-pleasant-plain","/apps/azurmite/public/audio/various-tracks/chibi-ninja.mp3"),A.load.spritesheet("dude","/apps/azurmite/public/images/main-character/main-character.png",32,48),A.load.spritesheet("funky-flower","/apps/azurmite/public/images/enemies/funky-flower.png",28,32),A.load.spritesheet("black-flower","/apps/azurmite/public/images/enemies/black-flower.png",260,430),A.load.tilemap("demoLevel","/apps/azurmite/public/images/levels/demo/DemoLevel.json",null,Phaser.Tilemap.TILED_JSON),A.load.tilemap("pleasantPlain","/apps/azurmite/public/images/levels/pleasant-plain/PleasantPlain.json",null,Phaser.Tilemap.TILED_JSON)}function b(){"use strict";i=A.add.tileSprite(0,-125,A.width,A.width,"sky"),i.fixedToCamera=!0,m=A.add.tilemap("pleasantPlain"),m.addTilesetImage("phaser-tileset"),m.addTilesetImage("phaser-tileset-small"),m.setCollisionBetween(0,1e3),l=m.createLayer("Background"),j=m.createLayer("Level"),j.resizeWorld(),v=A.add.sprite(95,1e3,"diamond"),s=A.add.sprite(0,0,"funky-bullet"),u=A.add.sprite(8e3,50,"black-flower"),n=A.add.sprite(100,4,"dude"),p=A.add.sprite(0,0,"player-bullet"),k=m.createLayer("Foreground"),A.camera.follow(n),A.physics.startSystem(Phaser.Physics.ARCADE),A.physics.arcade.enable(n),n.body.collideWorldBounds=!0,n.anchor.setTo(.5,.5),n.body.gravity.y=1600,A.physics.arcade.enable(v),v.body.collideWorldBounds=!0,v.body.bounce.y=.5,v.body.gravity.y=350,A.physics.arcade.enable(s),A.physics.arcade.enable(u),u.body.bounce.y=.8,u.body.gravity.y=250,n.animations.add("left",[0,1,2,3],12,!0),n.animations.add("right",[5,6,7,8],12,!0),u.animations.add("move",[0,1,2,3,4],8,!0),u.animations.play("move"),B=A.add.text(16,16,"Diamonds: 0",{font:"16pt Consolas",fill:"#fff"}),B.fixedToCamera=!0,B.cameraOffset.setTo(20,40),C=A.add.text(50,25,"Health: 3",{font:"16pt Consolas",fill:"#fff"}),C.fixedToCamera=!0,C.cameraOffset.setTo(20,10),r=A.add.group(),r.enableBody=!0,r.physicsBodyType=Phaser.Physics.ARCADE;for(var a=11;26>a;a++)q=r.create(400*a,5,"funky-flower"),q.body.gravity.y=250,q.animations.add("spin",[4,3,2,1,0,1,2,3,4],8,!0),q.animations.play("spin");t=A.add.group(),t.enableBody=!0,t.physicsBodyType=Phaser.Physics.ARCADE,t.createMultiple(999,"funky-bullet"),t.setAll("outOfBoundsKill",!0),t.setAll("checkWorldBounds",!0),o=A.add.group(),o.enableBody=!0,o.physicsBodyType=Phaser.Physics.ARCADE,o.createMultiple(999,"player-bullet"),o.setAll("outOfBoundsKill",!0),o.setAll("checkWorldBounds",!0),w=A.add.audio("music-pleasant-plain"),w.loop=!0,w.play(),z=A.input.keyboard.createCursorKeys(),x=A.input.keyboard.addKey(Phaser.Keyboard.P),y=A.input.keyboard.addKey(Phaser.Keyboard.Z)}function c(){"use strict";function a(){n.kill()}function b(){u.kill()}A.physics.arcade.collide(n,j),A.physics.arcade.TILE_BIAS=10,n.body.velocity.y>600&&(A.physics.arcade.TILE_BIAS=400),A.physics.arcade.collide(v,j),A.physics.arcade.collide(r,j),A.physics.arcade.collide(u,j),A.physics.arcade.collide(n,r),A.physics.arcade.collide(n,t,a,null,this),A.physics.arcade.collide(u,o,b,null,this),i.tilePosition.x-=1,n.body.velocity.x=0,z.left.isDown?(n.body.velocity.x=-1*E,n.animations.play("left")):z.right.isDown?(n.body.velocity.x=E,n.animations.play("right")):(n.animations.stop(),n.frame=4),z.up.isDown&&n.body.onFloor()&&(n.body.velocity.y=-1*F),y.isDown&&z.right.isDown?d():y.isDown&&z.left.isDown?e():!y.isDown||z.left.isDown&&movement.right.isDown||f(),x.isDown&&(A.state.pause=!0,n.animations.currentAnim.paused=!0),A.physics.arcade.overlap(n,v,function(){v.kill(),D+=1,B.text="Diamonds: "+D,n.kill()},null,this),A.time.now>L&&h(),s.angle-=40,s.anchor.setTo(.5,.5)}function d(){p=o.create(n.x+20,n.y+5,"player-bullet"),p.body.velocity.x=500}function e(){p=o.create(n.x-20,n.y+5,"player-bullet"),p.body.velocity.x=-500}function f(){p=o.create(n.x,n.y-20,"player-bullet"),p.body.velocity.y=-500}function g(){G=n.body.x,H=n.body.y,s.body.x<=G+I&&funkybullet.body.x>=G-I&&n.kill(),A.physics.overlap(q,n)&&n.kill()}function h(){r.forEachAlive(function(a){n.body.x<a.body.x+J&&n.body.x>a.body.x-J&&(n.body.x<a.body.x?(s=t.create(a.x,a.y+12,"funky-bullet"),s.body.velocity.x=-1*K):(s=t.create(a.x+12,a.y+12,"funky-bullet"),s.body.velocity.x=K),L=A.time.now+M)})}var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=new Phaser.Game(1e3,700,Phaser.AUTO,"azurmite",{preload:a,create:b,update:c}),B="",C="",D=0,E=220,F=620,G=0,H=0,I=50,J=250,K=150,L=0,M=2500;g()}();